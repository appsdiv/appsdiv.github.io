<!doctype html>
<html lang="fa" dir="rtl" translate="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no"/>
  <meta name="color-scheme" content="light dark"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Ù†Ø²Ø¯ÛŒÚ©Ù Ù…Ù† â€” Ú©Ø§ÙÙ‡ Â· Ø±Ø³ØªÙˆØ±Ø§Ù† Â· Ø¯Ø³ØªØ´ÙˆÛŒÛŒ</title>
  <style>
    :root{
      --ink:#0f172a; --muted:#64748b; --bg:#0b1220; --card:rgba(255,255,255,.08);
      --glass:rgba(255,255,255,.06); --stroke:rgba(255,255,255,.12); --brand:#0ea5e9;
      --ok:#16a34a; --warn:#f59e0b; --err:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Vazirmatn, -apple-system, "SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: radial-gradient(1200px 1200px at 80% -10%, rgba(14,165,233,.18), transparent 60%) ,
                  radial-gradient(800px 800px at -10% 110%, rgba(99,102,241,.18), transparent 60%),
                  #0a0f1f;
      color:#e5e7eb; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    header{
      position:sticky; top:0; z-index:999;
      backdrop-filter:saturate(140%) blur(16px);
      background:linear-gradient(180deg, rgba(9,12,20,.85), rgba(9,12,20,.65));
      border-bottom:1px solid var(--stroke);
    }
    .bar{
      display:flex; align-items:center; gap:.75rem; padding:.75rem .9rem;
    }
    .logo{display:flex; align-items:center; gap:.6rem; font-weight:800; letter-spacing:.2px}
    .logo i{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,#22d3ee,#0ea5e9);box-shadow:0 10px 24px rgba(14,165,233,.35)}
    .muted{color:var(--muted); font-size:.85rem}
    .chip{display:inline-flex;align-items:center;gap:.4rem;padding:.35rem .6rem;border:1px solid var(--stroke);
      border-radius:999px;background:var(--glass); font-size:.8rem}
    .btn{
      display:inline-flex;align-items:center;gap:.5rem;border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color:#eaf2ff; padding:.6rem .9rem; border-radius:14px; font-weight:600;
      box-shadow:0 10px 20px rgba(2,6,23,.18); cursor:pointer; transition:.2s transform;
    }
    .btn:active{transform:scale(.98)}
    .grid{display:grid;grid-template-columns:1fr;gap:.9rem;padding:1rem .9rem 2rem}
    @media(min-width:480px){ .grid{grid-template-columns:1fr 1fr} }
    @media(min-width:880px){ .grid{grid-template-columns:1fr 1fr 1fr} }
    .card{
      border:1px solid var(--stroke); border-radius:18px; overflow:hidden;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.025));
      box-shadow:0 24px 60px rgba(2,6,23,.25);
    }
    .thumb{width:100%;height:170px;background:#0b1220;object-fit:cover}
    .body{padding:.8rem .9rem 1rem}
    .title{font-weight:800; line-height:1.3}
    .meta{display:flex;flex-wrap:wrap;gap:.5rem;margin:.55rem 0;color:#cbd5e1;font-size:.86rem}
    .badge{padding:.25rem .5rem;border-radius:999px;border:1px solid var(--stroke);background:var(--glass)}
    .row{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-top:.7rem}
    .row .addr{color:#cbd5e1;font-size:.85rem}
    .actions{display:flex;gap:.5rem}
    .icon{width:18px;height:18px;display:inline-block;vertical-align:-3px;opacity:.9}
    .tabs{display:flex;gap:.5rem;overflow:auto;padding:.5rem .9rem .75rem;border-bottom:1px solid var(--stroke)}
    .tab{
      white-space:nowrap; padding:.45rem .8rem; border-radius:10px; border:1px solid var(--stroke);
      background:var(--glass); font-weight:700; color:#e2e8f0; cursor:pointer
    }
    .tab[aria-selected="true"]{background:rgba(14,165,233,.15);border-color:rgba(14,165,233,.5);box-shadow:0 12px 20px rgba(14,165,233,.2)}
    .empty, .warn{
      margin:1rem; border:1px dashed var(--stroke); border-radius:16px; padding:1rem; background:rgba(255,255,255,.02)
    }
    .footer{padding:1.1rem .9rem 2rem; color:#9fb0c6; font-size:.8rem}
    .spinner{width:18px;height:18px;border:3px solid rgba(255,255,255,.28);border-top-color:#fff;border-radius:50%;animation:sp 1s linear infinite}
    @keyframes sp{to{transform:rotate(1turn)}}
    .pill{display:inline-flex;align-items:center;gap:.45rem;padding:.35rem .6rem;border-radius:999px;border:1px solid var(--stroke);background:var(--glass)}
    .kicker{display:flex;align-items:center;gap:.6rem; padding:.35rem .9rem .7rem .9rem}
    .kicker .dot{width:8px;height:8px;border-radius:50%;background:#34d399;box-shadow:0 0 0 0 rgba(52,211,153,.8);animation:pulse 2s infinite}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(52,211,153,.6)}70%{box-shadow:0 0 0 14px rgba(52,211,153,0)}100%{box-shadow:0 0 0 0 rgba(52,211,153,0)}}
    .toast{position:fixed;inset:auto .9rem 1rem .9rem;z-index:1000;display:none}
    .toast.show{display:block}
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="logo" aria-label="Ù†Ø²Ø¯ÛŒÚ© Ù…Ù†">
        <i></i><span>Ù†Ø²Ø¯ÛŒÚ©Ù Ù…Ù†</span>
      </div>
      <div class="muted" id="status">Ø¢Ù…Ø§Ø¯Ù‡...</div>
      <div style="flex:1"></div>
      <button class="btn" id="btnRefresh">
        <span class="spinner" id="spin" style="display:none"></span>
        Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ø±Ø§Ù
      </button>
    </div>
    <div class="kicker">
      <span class="dot" aria-hidden="true"></span>
      <span class="muted">Ø¨Ø§ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒØŒ Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØ¢ÙˆØ±ÛŒÙ….</span>
    </div>
    <div class="tabs" role="tablist">
      <button class="tab" role="tab" data-type="all" aria-selected="true">Ù‡Ù…Ù‡</button>
      <button class="tab" role="tab" data-type="cafe">Ú©Ø§ÙÙ‡</button>
      <button class="tab" role="tab" data-type="restaurant">Ø±Ø³ØªÙˆØ±Ø§Ù†</button>
      <button class="tab" role="tab" data-type="wc">Ø¯Ø³ØªØ´ÙˆÛŒÛŒ</button>
    </div>
  </header>

  <main id="app">
    <div class="warn" id="httpsWarn" style="display:none">
      Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ GPS Ùˆ Ù†ØµØ¨ PWAØŒ ØµÙØ­Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø² <b>HTTPS</b> ÛŒØ§ <b>localhost</b> Ø§Ø±Ø§Ø¦Ù‡ Ø´ÙˆØ¯.
    </div>
    <div class="grid" id="list"></div>
    <div class="empty" id="empty" style="display:none">Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</div>
  </main>

  <div class="footer">
    Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡: Foursquare Places â€¢ <span class="pill">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ: Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†</span>
  </div>

  <div class="toast" id="toast"><span class="pill">âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆÛŒØ³ â€” Ø¨Ø¹Ø¯Ø§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.</span></div>

  <script>
  // ====== ØªÙ†Ø¸ÛŒÙ…Ø§Øª ======
  const FSQ_API_KEY = "fsq3hCo3uTtEHcT4q+ykBmbgGFFRaRak95Qs577BjEdbK4E="; // Ú©Ù„ÛŒØ¯ Ø´Ù…Ø§
  const SEARCH_LIMIT = 20; // Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù†ÙˆØ¹
  const SEARCH_RADIUS = 2500; // Ù…ØªØ±
  const ENABLE_PHOTOS = true; // Ø¹Ú©Ø³ Ø§ÙˆÙ„ Ù‡Ø± Ù…Ú©Ø§Ù†
  const ENABLE_RATING = true; // Ø§Ù…ØªÛŒØ§Ø² (Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø± Ø¯Ø³ØªØ±Ø³)
  // =====================

  const state = { ll:null, list:[], filtered:'all' };
  const $ = (s, root=document) => root.querySelector(s);
  const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));
  const statusEl = $("#status"), listEl = $("#list"), emptyEl = $("#empty");
  const spinEl = $("#spin"), toastEl = $("#toast");

  // PWA: Ù…Ø§Ù†ÙŠÙØ³Øª Ùˆ Ø³Ø±ÙˆÛŒØ³â€ŒÙˆØ±Ú©Ø± (Ù‡Ù…Ù‡ Ø¯Ø± ÛŒÚ© ÙØ§ÛŒÙ„)
  (function setupPWA(){
    const manifest = {
      name:"Ù†Ø²Ø¯ÛŒÚ©Ù Ù…Ù†",
      short_name:"Ù†Ø²Ø¯ÛŒÚ©Ù Ù…Ù†",
      dir:"rtl", lang:"fa",
      start_url:"./",
      scope:"./",
      display:"standalone",
      background_color:"#0a0f1f",
      theme_color:"#0a0f1f",
      icons:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAACq8/9RAAAAJ0lEQVR42u3MMQEAAAgDINc/9CwYkQ3m8qfEo8EAAAAAAAAAAAAAADgE1EoAAHcXJb1AAAAAElFTkSuQmCC",sizes:"144x144",type:"image/png"}]
    };
    const blob = new Blob([JSON.stringify(manifest)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const link = document.createElement("link");
    link.rel = "manifest"; link.href = url; document.head.appendChild(link);

    const swCode = `
      const CACHE = 'nearby-v1';
      self.addEventListener('install', e=>{
        e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./'])));
        self.skipWaiting();
      });
      self.addEventListener('activate', e=>self.clients.claim());
      self.addEventListener('fetch', e=>{
        const req = e.request;
        // ÙÙ‚Ø· HTML ØµÙØ­Ù‡ Ø±Ø§ Ú©Ø´ Ú©Ù†Ø› Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ API Ú©Ø´ Ù†Ø´ÙˆÙ†Ø¯
        if(req.method==='GET' && req.headers.get('accept')?.includes('text/html')){
          e.respondWith(
            caches.match('./').then(cached=> cached || fetch(req).then(r=>{
              const r2 = r.clone();
              caches.open(CACHE).then(c=>c.put('./', r2));
              return r;
            }).catch(()=>cached))
          );
        }
      });
    `;
    const swBlob = new Blob([swCode], {type:"text/javascript"});
    const swUrl = URL.createObjectURL(swBlob);
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register(swUrl).catch(()=>{});
    }
  })();

  // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
  window.addEventListener('DOMContentLoaded', ()=>{
    if(location.protocol!=='https:' && location.hostname!=='localhost'){
      $("#httpsWarn").style.display = 'block';
    }
    bindUI();
    getLocationAndLoad();
  });

  function bindUI(){
    $("#btnRefresh").addEventListener('click', getLocationAndLoad);
    $$(".tab").forEach(tab=>{
      tab.addEventListener('click', ()=>{
        $$(".tab").forEach(t=>t.setAttribute('aria-selected','false'));
        tab.setAttribute('aria-selected','true');
        state.filtered = tab.dataset.type;
        render();
      });
    });
  }

  function toast(msg, ms=3000){
    if(msg) $("#toast .pill").textContent = msg;
    toastEl.classList.add('show');
    setTimeout(()=>toastEl.classList.remove('show'), ms);
  }

  // Ø¯Ø±ÛŒØ§ÙØª Ù…ÙˆÙ‚Ø¹ÛŒØª
  function getLocationAndLoad(){
    if(!('geolocation' in navigator)){
      status('GPS Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª', true); return;
    }
    spin(true); status('Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ù…Ú©Ø§Ù† Ø´Ù…Ø§...');
    navigator.geolocation.getCurrentPosition(async pos=>{
      const {latitude, longitude} = pos.coords;
      state.ll = `${latitude.toFixed(6)},${longitude.toFixed(6)}`;
      status('ÛŒØ§ÙØª Ø´Ø¯ â€” Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬Ùˆ...');
      await loadAll();
      spin(false); status('Ø¢Ù…Ø§Ø¯Ù‡');
    }, err=>{
      spin(false);
      status('Ø§Ø¬Ø§Ø²Ù‡â€ŒÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ú©Ø§Ù† Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø±Ø® Ø¯Ø§Ø¯.', true);
      toast('Ø§Ø¬Ø§Ø²Ù‡â€ŒÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª ÛŒØ§ GPS Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.');
    }, {enableHighAccuracy:true, timeout:12000, maximumAge:30000});
  }

  function spin(on){ spinEl.style.display = on ? 'inline-block' : 'none'; }
  function status(t, bad=false){ statusEl.textContent = t; statusEl.style.color = bad ? 'var(--err)' : '#9fb0c6'; }

  // ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Foursquare
  const BASE='https://api.foursquare.com/v3';
  const HEADERS={ 'Accept':'application/json', 'Authorization':FSQ_API_KEY };

  async function fsq(url, opts={}){
    const ctrl = new AbortController(); const t = setTimeout(()=>ctrl.abort(), 12000);
    try{
      const res = await fetch(url, {headers:HEADERS, signal:ctrl.signal, ...opts});
      if(!res.ok) throw new Error('HTTP '+res.status);
      return await res.json();
    } finally{ clearTimeout(t); }
  }

  async function searchType(query){
    // ÛŒÚ© Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ§ØµÙ„Ù‡
    const url = `${BASE}/places/search?ll=${encodeURIComponent(state.ll)}&query=${encodeURIComponent(query)}&limit=${SEARCH_LIMIT}&radius=${SEARCH_RADIUS}&sort=DISTANCE`;
    const data = await fsq(url);
    return (data.results||[]).map(x=>normPlace(x));
  }

  function normPlace(x){
    const lat = x.geocodes?.main?.latitude, lng = x.geocodes?.main?.longitude;
    return {
      id:x.fsq_id, name:x.name||'â€”',
      distance:x.distance ?? null,
      address: x.location?.formatted_address || [x.location?.address, x.location?.locality].filter(Boolean).join('ØŒ '),
      lat, lng, rating: (typeof x.rating==='number') ? x.rating : null,
      link: x.link || null,
      category: (x.categories?.[0]?.name)||'',
      photo:null, // Ø¨Ø¹Ø¯Ø§Ù‹ Ù¾Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
      type: null   // Ø¨Ø¹Ø¯Ø§Ù‹ Ø³Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
    };
  }

  async function enrichPhoto(p){
    if(!ENABLE_PHOTOS) return p;
    try{
      const js = await fsq(`${BASE}/places/${p.id}/photos?limit=1`);
      const ph = js?.[0];
      if(ph?.prefix && ph?.suffix){
        p.photo = `${ph.prefix}original${ph.suffix}`;
      }
    }catch(_){}
    return p;
  }
  async function enrichRating(p){
    if(!ENABLE_RATING || typeof p.rating==='number') return p;
    try{
      const js = await fsq(`${BASE}/places/${p.id}?fields=rating,link`);
      if(typeof js?.rating==='number') p.rating = js.rating;
      if(js?.link) p.link = js.link;
    }catch(_){}
    return p;
  }

  async function loadAll(){
    if(!state.ll){ empty(); return; }
    listEl.innerHTML = ''; empty(false);
    spin(true);

    // Ø³Ù‡ Ù†ÙˆØ¹: Ú©Ø§ÙÙ‡ØŒ Ø±Ø³ØªÙˆØ±Ø§Ù†ØŒ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ
    const tasks = [
      searchType('cafe').then(arr=>arr.map(o=>({...o, type:'cafe'}))),
      searchType('restaurant').then(arr=>arr.map(o=>({...o, type:'restaurant'}))),
      // Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ Ú†Ù†Ø¯ ØªÙ„Ø§Ø´ Ø¨Ø§ Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ØªÙØ§ÙˆØª
      (async()=>{
        let arr = await searchType('toilet');
        if(arr.length<6) arr = arr.concat(await searchType('restroom'));
        if(arr.length<6) arr = arr.concat(await searchType('wc'));
        // ÛŒÚ©ØªØ§ Ùˆ Ø¨Ø±Ú†Ø³Ø¨
        const uniq = new Map();
        arr.forEach(o=>uniq.set(o.id, {...o, type:'wc'}));
        return [...uniq.values()];
      })()
    ];

    try{
      const groups = await Promise.all(tasks);
      let all = groups.flat();
      // ØºÙ†ÛŒâ€ŒØ³Ø§Ø²ÛŒ (Ø¹Ú©Ø³ + Ø§Ù…ØªÛŒØ§Ø²) Ø¨Ø§ Ú©Ù†ØªØ±Ù„ Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ
      all.sort((a,b)=>(a.distance??1e9)-(b.distance??1e9));
      const concurrency = 6;
      const runBatch = async (items, fn)=>{
        for(let i=0;i<items.length;i+=concurrency){
          await Promise.all(items.slice(i,i+concurrency).map(fn));
          render(); // ØªØ¯Ø±ÛŒØ¬ÛŒ Ø±Ù†Ø¯Ø± Ú©Ù†
        }
      };
      await runBatch(all, async p=>enrichPhoto(p));
      await runBatch(all, async p=>enrichRating(p));

      state.list = all;
      render();
    }catch(e){
      toast('Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø§Ø² Foursquare Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.'); console.error(e);
    }finally{
      spin(false);
    }
  }

  function empty(show=true){ emptyEl.style.display = show ? 'block' : 'none'; }
  function formatDist(m){
    if(m==null) return 'â€”';
    return m<1000 ? `${Math.round(m)} Ù…ØªØ±` : `${(m/1000).toFixed(1)} Ú©ÛŒÙ„ÙˆÙ…ØªØ±`;
  }
  function starBadge(r){
    if(typeof r!=='number') return '<span class="badge">â­ â€”</span>';
    return `<span class="badge">â­ ${r.toFixed(1)}</span>`;
  }
  function typeBadge(t){
    const map={cafe:'Ú©Ø§ÙÙ‡', restaurant:'Ø±Ø³ØªÙˆØ±Ø§Ù†', wc:'Ø¯Ø³ØªØ´ÙˆÛŒÛŒ'};
    return `<span class="badge">${map[t]||'â€”'}</span>`;
  }
  function mapsDirLink(p){
    const q = encodeURIComponent(p.name||'Ù…Ù‚ØµØ¯');
    const ll = `${p.lat},${p.lng}`;
    // Apple Maps Ø±ÙˆÛŒ iOSØŒ Ú¯ÙˆÚ¯Ù„ Ø¨Ø±Ø§ÛŒ Ø¨Ù‚ÛŒÙ‡
    const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
    return isIOS ? `https://maps.apple.com/?q=${q}&ll=${ll}` : `https://www.google.com/maps/dir/?api=1&destination=${ll}&destination_place_id=&travelmode=driving`;
  }

  function render(){
    const data = state.list.filter(p=> state.filtered==='all' ? true : p.type===state.filtered);
    listEl.innerHTML = data.map(p=>{
      const img = p.photo ? `<img class="thumb" loading="lazy" src="${p.photo}" alt="ØªØµÙˆÛŒØ± ${p.name}">`
                          : `<div class="thumb" style="display:flex;align-items:center;justify-content:center;color:#93c5fd">Ø¨Ø¯ÙˆÙ† ØªØµÙˆÛŒØ±</div>`;
      return `
        <article class="card">
          ${img}
          <div class="body">
            <div class="title">${p.name}</div>
            <div class="meta">
              ${typeBadge(p.type)} ${starBadge(p.rating)}
              <span class="badge">ğŸ“ ${formatDist(p.distance)}</span>
            </div>
            <div class="row">
              <div class="addr">${p.address||'â€”'}</div>
            </div>
            <div class="row">
              <div class="actions">
                <a class="btn" href="${mapsDirLink(p)}" rel="noopener" target="_blank">Ù…Ø³ÛŒØ±</a>
                ${p.link ? `<a class="btn" href="${p.link}" rel="noopener" target="_blank">ØµÙØ­Ù‡</a>`:''}
              </div>
              <span class="muted">ID: ${p.id.slice(0,6)}â€¦</span>
            </div>
          </div>
        </article>
      `;
    }).join('');
    empty(data.length===0);
  }
  </script>
</body>
</html>
